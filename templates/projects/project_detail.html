<!-- templates/projects/project_detail.html -->
{% extends 'base.html' %}

{% block title %}{{ project.name }} - TiltPenguin{% endblock %}

{% block content %}
<div class="page-header">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h1 class="page-title">{{ project.name }}</h1>
            <p class="page-description">
                <span class="tag tag-default">{{ project.get_engine_display }}</span>
                <span class="tag tag-blue">{{ project.get_status_display|slice:"2:" }}</span>
                {% if project.is_jam_game %}
                <span class="tag tag-yellow">{{ project.jam_name }}</span>
                {% endif %}
            </p>
        </div>
        <div class="quick-actions">
            <a href="{% url 'bug_list' project.pk %}" class="btn-ghost" style="text-decoration: none;">🐛</a>
            <a href="{% url 'asset_list' project.pk %}" class="btn-ghost" style="text-decoration: none;">📦</a>
            <a href="{% url 'devlog_list' project.pk %}" class="btn-ghost" style="text-decoration: none;">📝</a>
        </div>
    </div>
</div>

<div class="page-content">
    <!-- Quick Actions - Fixed Links -->
    <div class="quick-actions" style="margin-bottom: 32px;">
        <a href="{% url 'task_create' project.pk %}" class="btn-primary-minimal">
            + New Task
        </a>
        <a href="{% url 'devlog_create' project.pk %}" class="btn-secondary-minimal">
            📝 Add Log
        </a>
        <a href="{% url 'bug_create' project.pk %}" class="btn-secondary-minimal">
            🐛 Report Bug
        </a>
        <a href="{% url 'milestone_create' project.pk %}" class="btn-secondary-minimal">
            🏁 Add Milestone
        </a>
        <a href="{% url 'asset_upload' project.pk %}" class="btn-secondary-minimal">
            📦 Upload Asset
        </a>
    </div>
    
    <!-- Rest of the template remains the same -->
    <!-- Stats -->
    <div class="stats-grid" style="margin-bottom: 32px;">
        <div class="stat-card">
            <div class="stat-value">{{ task_stats.total }}</div>
            <div class="stat-label">Total Tasks</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ task_stats.completed }}</div>
            <div class="stat-label">Completed</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ task_stats.in_progress }}</div>
            <div class="stat-label">In Progress</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ open_bugs.count }}</div>
            <div class="stat-label">Open Bugs</div>
        </div>
    </div>
    
    <!-- Add section headers that link to full lists -->
    <section style="margin-bottom: 48px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h2 style="font-size: 16px; font-weight: 600;">Tasks</h2>
            <a href="{% url 'task_list' project.pk %}" class="btn-ghost" style="text-decoration: none;">View All →</a>
        </div>
        <!-- Tasks table here -->
    </section>
    
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 32px;">
        <!-- Dev Logs with View All link -->
        <section>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h2 style="font-size: 16px; font-weight: 600;">Development Logs</h2>
                <a href="{% url 'devlog_list' project.pk %}" class="btn-ghost" style="text-decoration: none;">View All →</a>
            </div>
            {% for log in recent_logs %}
            <!-- Dev log cards -->
            {% endfor %}
        </section>
        
        <!-- Sidebar with View All links -->
        <section>
            <div style="margin-bottom: 32px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h3 style="font-size: 14px; font-weight: 600;">Milestones</h3>
                    <a href="{% url 'milestone_list' project.pk %}" class="btn-ghost" style="text-decoration: none; padding: 2px 6px;">All</a>
                </div>
                <!-- Milestones here -->
            </div>
            
            <div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <h3 style="font-size: 14px; font-weight: 600;">Builds</h3>
                    <a href="{% url 'build_list' project.pk %}" class="btn-ghost" style="text-decoration: none; padding: 2px 6px;">All</a>
                </div>
                <!-- Builds here -->
            </div>
        </section>
    </div>
</div>
{% endblock %}